@page "/holder/stock/{HolderId:int}/products"
<PageTitle>Товары на складе</PageTitle>
@attribute [Label("Точка выдачи. Сведения по товарам.")]

@inject NavigationManager nav
@inject IHolderService holdersService
@inject DeliveryDbContext db
@code 
{
    [Parameter]
    public int HolderId { get; set; }

    public IEnumerable<ProductsInStock> instock { get; set; }
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        this.instock = holdersService.GetProductsInStock(HolderId);  

    }
    int ctn = 1;
}
<div class="card">
    <div class="card-header">
        <h3>Товары в наличии на складе @(db.Holders.Find(HolderId).HolderLocation)</h3>
    </div>
    <style>
        td
        {
            padding: 5px;
            margin: 5px;
        }

        .highlight-on-hover:hover
        {
            background-color: var(--bs-primary);
            color: white;
        }
    </style>
    <div class="card-body" style="overflow: hidden;">
        <table class="table table-light table-bordered">
            <tr>
                <th>#</th>
                <th>Код</th>
                <th>Товар</th>
                <th>Доступно</th>
                <th>Количество</th>
                <th>Зарезервировано</th>
                <th>На складе</th>
            </tr>
            @foreach(var instock in instock)
            {
                <tr class="highlight-on-hover" @onclick='(evt => nav.NavigateTo($"/holder/holder/{HolderId}/product/{instock.ProductId}"))'>
                    <td>@(ctn++)</td>
                    <td>@(instock.ProductId)</td>
                    <td>@((db.Products.First(p => p.Id == instock.ProductId)).ProductName)</td>
                    <td>@instock.ProductCount</td>
                    <td>@instock.ProductsInReserve</td>
                    <td>@(instock.ProductCount-instock.ProductsInReserve)</td>
                    <td>@instock.StoreSize</td>
                </tr>
            }
        </table>
    </div>
    <div class="card-footer">

    </div>
</div>
