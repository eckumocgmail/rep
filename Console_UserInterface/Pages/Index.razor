@page "/"
@using Console_UserInterface.Shared.Forms
@using Microsoft.EntityFrameworkCore;
@using static Console_UserInterface.Shared.Forms.ValidationForm;
@inject IServiceProvider provider
@code
{
    public class P
    {
        public P() { }

        [InputDictionary($"{nameof(Product)},{nameof(Product.ProductName)}")]
        public int ProductId { get; set; }
    }
    public List<string> InputTypes { get; set; } = new();
    public List<string> DbContextTypes { get; set; } = new();
}
<FormEditor Model="@(new InputFormModel(new P(), new string[]{"ProductId"}))"></FormEditor>
<FormEditor Model="@(new InputFormModel(new CustomerCar()))"></FormEditor>

<PageTitle>Главная страница</PageTitle>
<CardContainer>
    <CardHeader>Выберите контекст данных</CardHeader>
    <CardBody>
        <CheckList ListItems="@(GetType().Assembly.GetTypes<DbContext>().Select(t => t.GetTypeName()).ToList())" OnChanged="(evt => { DbContextTypes=evt; StateHasChanged(); })"></CheckList>               
    </CardBody>
</CardContainer>

@foreach (var db in DbContextTypes.Select(type => type.New()))
{
    <CardContainer>
        <CardHeader>Контекст @db.GetTypeName()</CardHeader>
        <CardBody>
            <CheckList ListItems="@db.GetEntitiesTypes().Select(p => p.GetTypeName().Replace("DbSet<","").Replace(">","")).Select(p => p.LastIndexOf(".")!=-1? p.Substring(p.LastIndexOf(".")+1): p).ToList()" OnChanged="(evt => InputTypes = evt)"></CheckList>
        </CardBody>
    </CardContainer>    
}

@foreach (var type in InputTypes)
{
    <CardContainer>
        <CardHeader>Сущность @type</CardHeader>
        <CardBody>
            @*<InputForm TypeName="@type"></InputForm>*@
            <FormEditor Model="@(new InputFormModel(type.New()))"></FormEditor>
        </CardBody>
    </CardContainer>

}
